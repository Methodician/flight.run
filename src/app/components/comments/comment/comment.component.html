<section class="comment">
  <h2 *ngIf="!comment.deleted">Posted by: <span class="highlight bold">{{authorName}}</span> on {{comment.timeStamp | date}}<span *ngIf="comment.edited"> - <span class="highlight">Edited</span></span>
  </h2>
  <h2 *ngIf="comment.deleted" class="bold">Post from {{comment.timeStamp | date}}</h2>
  <p>{{comment.body}}</p>

  <div *ngIf="userId && !comment.deleted && !replyMode && !editMode"
       class="comment-controls">
    <button class="fly-btn primary"
            (click)="toggleReplyMode()">
      Reply
    </button>
    <button *ngIf="isAuthor()"
            class="fly-btn light"
            (click)="toggleEditMode()">
      Edit
    </button>
    <button *ngIf="isAuthor()"
            class="fly-btn light"
            (click)="startDeleteComment()">
      Remove
    </button>
  </div>

  <fly-add-comment *ngIf="replyMode"
                   [isRootComment]="false"
                   [userId]="userId"
                   [username]="username"
                   [parentId]="key"
                   (saveComment)="onSaveComment($event); toggleReplyMode()"
                   (cancelComment)="toggleReplyMode()">
  </fly-add-comment>

  <fly-add-comment *ngIf="editMode && isAuthor()"
                   [isRootComment]="isRootComment"
                   [isEdit]="true"
                   [commentToEditKey]="key"
                   [commentToEdit]="comment"
                   [userId]="userId"
                   [username]="username"
                   [parentId]="parentId"
                   (saveComment)="onSaveComment($event); toggleEditMode()"
                   (cancelComment)="toggleEditMode()">
  </fly-add-comment>

  <fly-comment *ngFor="let responseKey of responseKeys"
               [key]="responseKey"
               [isRootComment]="false"
               [comment]="responseList[responseKey]"
               [parentId]="key"
               [username]="username"
               [userId]="userId"
               (saveComment)="onSaveComment($event)"
               (deleteComment)="onDeleteComment($event)">
  </fly-comment>
</section>
