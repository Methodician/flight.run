<section class="comment">
  <h2>Posted by:
    <span class="highlight bold">{{author?.name}}</span>
    on {{date}}
    <span *ngIf="comment.edited" class="highlight">Edited</span>
  </h2>
  <p>{{comment.body}}</p>

  <div class="comment-controls"
       *ngIf="!comment.deleted && !editMode">
    <fly-add-comment [postSlug]="postSlug"
                     [type]="'responses'"
                     [parentId]="key"
                     (toggleCommentMode)="toggleCommentMode()">
    </fly-add-comment>
    <div class="author-controls"
         *ngIf="isAuthor && !commentMode">
      <button (click)="toggleEditMode()">Edit</button>
      <button (click)="deleteComment()">Remove</button>
    </div>
  </div>

  <div class="edit-mode-controls"
       *ngIf="editMode">
    <fly-edit-comment [key]="key"
                      [type]="type"
                      [comment]="comment"
                      [parentId]="parentId"
                      (toggleEditMode)=toggleEditMode()>
    </fly-edit-comment>
    <button (click)="toggleEditMode()">Cancel</button>
  </div>

  <fly-comment *ngFor="let responseKey of responseKeys"
               class="response"
               [key]="responseKey"
               [type]="'responses'"
               [comment]="responseList[responseKey]"
               [postSlug]="postSlug"
               [parentId]="key">
  </fly-comment>
</section>
